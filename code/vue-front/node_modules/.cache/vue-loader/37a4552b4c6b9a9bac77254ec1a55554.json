{"remainingRequest":"D:\\0javaproject\\code\\vue-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\0javaproject\\code\\vue-front\\src\\pages\\register\\register.vue?vue&type=style&index=0&id=2d48598a&scoped=true&lang=css","dependencies":[{"path":"D:\\0javaproject\\code\\vue-front\\src\\pages\\register\\register.vue","mtime":1742651777579},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouY29udGFpbmVyIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBiYWNrZ3JvdW5kOiB1cmwoaHR0cDovL2NvZGVnZW4uY2FpaG9uZ3kuY24vMjAyNDAxMDkvMWUyZTRmMjYxYTMzNDYxNWFiMDY4ZDc3YzEwZGFmM2YucG5nKTsNCiAgLyog5YW25LuW5qC35byP5LiN5Y+YICovDQp9DQoNCi5yZXF1aXJlZCB7DQogIG1hcmdpbi1yaWdodDogNXB4Ow0KICBjb2xvcjogcmVkOw0KfQ0K"},{"version":3,"sources":["register.vue"],"names":[],"mappings":";AA2KA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/pages/register","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\"\r\n         :style='{\"minHeight\":\"100vh\",\"alignItems\":\"center\",\"background\":\"url(http://codegen.caihongy.cn/20240109/1e2e4f261a334615ab068d77c10daf3f.png)\",\"display\":\"flex\",\"width\":\"100%\",\"backgroundSize\":\"100% 100%\",\"backgroundPosition\":\"center center\",\"backgroundRepeat\":\"no-repeat\",\"justifyContent\":\"center\"}'>\r\n      <el-form class=\"rgs-form\" v-if=\"pageFlag=='register'\"\r\n               :style='{\"padding\":\"200px 20px 50px\",\"boxShadow\":\"none\",\"margin\":\"20px 0 40px\",\"alignItems\":\"center\",\"flexDirection\":\"column\",\"display\":\"flex\",\"borderRadius\":\"10px\",\"flexWrap\":\"wrap\",\"background\":\"url(http://codegen.caihongy.cn/20240109/cb7f19f1621648a1aa900738964dddd9.png)\",\"width\":\"45vw\",\"backgroundSize\":\"100% 100%\",\"backgroundPosition\":\"center center\",\"backgroundRepeat\":\"no-repeat\",\"height\":\"auto\"}'\r\n               ref=\"registerForm\" :model=\"registerForm\" :rules=\"rules\">\r\n        <div :style='{\"margin\":\"0 0 10px 0\",\"color\":\"#fff\",\"textAlign\":\"center\",\"width\":\"100%\",\"lineHeight\":\"44px\",\"fontSize\":\"24px\",\"textShadow\":\"none\"}'>\r\n          基于Java的个人摄影作品管理网站注册\r\n        </div>\r\n\r\n        <!-- 账号 -->\r\n        <el-form-item :style='{\"width\":\"auto\",\"padding\":\"0\",\"margin\":\"0 auto 15px\",\"height\":\"auto\"}'\r\n                      v-if=\"tableName=='ordinaryUser'\" prop=\"account\">\r\n          <div :style='{\"width\":\"auto\",\"lineHeight\":\"44px\",\"fontSize\":\"14px\",\"color\":\"rgba(64, 158, 255, 1)\"}'\r\n               class=\"required\">*账号：</div>\r\n          <el-input v-model=\"registerForm.account\" placeholder=\"请输入账号\"/>\r\n        </el-form-item>\r\n\r\n        <!-- 密码 -->\r\n        <el-form-item :style='{\"width\":\"auto\",\"padding\":\"0\",\"margin\":\"0 auto 15px\",\"height\":\"auto\"}'\r\n                      v-if=\"tableName=='ordinaryUser'\" prop=\"password\">\r\n          <div :style='{\"width\":\"auto\",\"lineHeight\":\"44px\",\"fontSize\":\"14px\",\"color\":\"rgba(64, 158, 255, 1)\"}'\r\n               class=\"required\">*密码：</div>\r\n          <el-input v-model=\"registerForm.password\" type=\"password\" placeholder=\"请输入密码\"/>\r\n        </el-form-item>\r\n\r\n        <!-- 确认密码 -->\r\n        <el-form-item :style='{\"width\":\"auto\",\"padding\":\"0\",\"margin\":\"0 auto 15px\",\"height\":\"auto\"}'\r\n                      v-if=\"tableName=='ordinaryUser'\" prop=\"password2\">\r\n          <div :style='{\"width\":\"auto\",\"lineHeight\":\"44px\",\"fontSize\":\"14px\",\"color\":\"rgba(64, 158, 255, 1)\"}'\r\n               class=\"required\">*确认密码：</div>\r\n          <el-input v-model=\"registerForm.password2\" type=\"password\" placeholder=\"请再次输入密码\"/>\r\n        </el-form-item>\r\n\r\n        <!-- 其他非必填项省略... -->\r\n\r\n        <el-button\r\n            :style='{\"border\":\"0\",\"cursor\":\"pointer\",\"padding\":\"0 10px\",\"boxShadow\":\"none\",\"margin\":\"20px auto\",\"color\":\"#fff\",\"display\":\"block\",\"outline\":\"none\",\"borderRadius\":\"8px\",\"background\":\"#FFC174\",\"width\":\"40%\",\"fontSize\":\"18px\",\"fontWeight\":\"bold\",\"height\":\"44px\"}'\r\n            type=\"primary\" @click=\"submitForm('registerForm')\">注册\r\n        </el-button>\r\n        <router-link\r\n            :style='{\"cursor\":\"pointer\",\"padding\":\"0 10%\",\"color\":\"#fff\",\"display\":\"inline-block\",\"lineHeight\":\"1\",\"fontSize\":\"14px\",\"textDecoration\":\"none\"}'\r\n            to=\"/login\">已有账户登录\r\n        </router-link>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pageFlag: '',\r\n      tableName: '',\r\n      registerForm: {},\r\n      rules: {},\r\n      ordinaryUseruserSexOptions: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.$route.query.pageFlag === 'register') {\r\n      this.tableName = this.$route.query.role;\r\n      if (this.tableName === 'ordinaryUser') {\r\n        this.registerForm = {\r\n          account: '',\r\n          password: '',\r\n          password2: '',\r\n          realName: '',\r\n          userSex: '',\r\n          mobile: '',\r\n          email: '',\r\n          idCard: '',\r\n          userAvatar: '',\r\n          money: '',\r\n          vip: '',\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.pageFlag = this.$route.query.pageFlag;\r\n    if (this.pageFlag === 'register') {\r\n      if (this.tableName === 'ordinaryUser') {\r\n        this.rules.account = [{ required: true, message: '请输入账号', trigger: 'blur' }];\r\n        this.rules.password = [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { validator: this.validatePassword, trigger: 'blur' }\r\n        ];\r\n        this.rules.password2 = [\r\n          { required: true, message: '请再次输入密码', trigger: 'blur' },\r\n          { validator: this.validatePassword2, trigger: 'blur' }\r\n        ];\r\n      }\r\n      this.ordinaryUseruserSexOptions = \"男,女\".split(',');\r\n      // 其他规则设置……\r\n    }\r\n  },\r\n  methods: {\r\n    // 自定义密码校验：至少6位，包含大小写字母和至少一个特殊字符\r\n    validatePassword(rule, value, callback) {\r\n      if (!value) {\r\n        return callback(new Error(\"密码不能为空\"));\r\n      }\r\n      const lengthValid = value.length >= 6;\r\n      const hasLower = /[a-z]/.test(value);\r\n      const hasUpper = /[A-Z]/.test(value);\r\n      // 这里定义特殊字符集，可根据需求调整\r\n      const hasSpecial = /[!@#$%^&*(),.?\":{}|<>]/.test(value);\r\n      if (!lengthValid) {\r\n        return callback(new Error(\"密码至少6位\"));\r\n      }\r\n      if (!(hasLower && hasUpper)) {\r\n        return callback(new Error(\"密码需包含大小写字母\"));\r\n      }\r\n      if (!hasSpecial) {\r\n        return callback(new Error(\"密码需包含至少一个特殊字符\"));\r\n      }\r\n      callback();\r\n    },\r\n    // 确认密码校验：需与密码一致\r\n    validatePassword2(rule, value, callback) {\r\n      if (!value) {\r\n        return callback(new Error(\"请再次输入密码\"));\r\n      }\r\n      if (value !== this.registerForm.password) {\r\n        return callback(new Error(\"两次密码输入不一致\"));\r\n      }\r\n      callback();\r\n    },\r\n    // 用于判断是否为必填项，页面中可根据此方法添加样式\r\n    changeRules(name) {\r\n      return this.rules[name] && this.rules[name][0].required;\r\n    },\r\n    // 文件上传回调（示例）\r\n    ordinaryUseruserAvatarUploadChange(fileUrls) {\r\n      this.registerForm.userAvatar = fileUrls.replace(new RegExp(this.$config.baseUrl, \"g\"), \"\");\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let url = `${this.tableName}/register`;\r\n          // 可添加其他非空校验（目前已通过规则校验）\r\n          this.$http.post(url, this.registerForm).then(res => {\r\n            if (res.data.code === 0) {\r\n              this.$message({\r\n                message: '注册成功',\r\n                type: 'success',\r\n                duration: 1500,\r\n                onClose: () => {\r\n                  this.$router.push('/login');\r\n                }\r\n              });\r\n            } else {\r\n              this.$message.error(res.data.msg);\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  position: relative;\r\n  background: url(http://codegen.caihongy.cn/20240109/1e2e4f261a334615ab068d77c10daf3f.png);\r\n  /* 其他样式不变 */\r\n}\r\n\r\n.required {\r\n  margin-right: 5px;\r\n  color: red;\r\n}\r\n</style>\r\n"]}]}