{"remainingRequest":"D:\\0javaproject\\code\\vue-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\0javaproject\\code\\vue-front\\src\\pages\\shop-cart\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\0javaproject\\code\\vue-front\\src\\pages\\shop-cart\\list.vue","mtime":1739012201322},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\0javaproject\\code\\vue-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZy9jb25maWcnDQoJZXhwb3J0IGRlZmF1bHQgew0KCQlkYXRhKCkgew0KCQkJcmV0dXJuIHsNCgkJCQliYXNlVXJsOiBjb25maWcuYmFzZVVybCwNCgkJCQl0YWJsZURhdGE6IFtdLA0KCQkJCXNlbFJvd3M6W10NCgkJCX0NCgkJfSwNCgkJY3JlYXRlZCgpIHsNCgkJCXRoaXMuZ2V0Q2FydExpc3QoKTsNCgkJfSwNCgkJbWV0aG9kczogew0KCQkJaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKGUpew0KCQkJCXRoaXMuc2VsUm93cyA9IGUNCgkJCX0sDQoJCQlnZXRDYXJ0TGlzdCgpIHsNCgkJCQl0aGlzLiRodHRwLmdldCgnY2FydC9saXN0Jywge3BhcmFtczoge3BhZ2U6IDEsIGxpbWl0OiAxMDAwLCB1c2VySWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmcm9udFVzZXJJZCcpfX0pLnRoZW4ocmVzID0+IHsNCgkJCQkJaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KCQkJCQkJdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5kYXRhLmxpc3Q7DQoJCQkJCX0NCgkJCQl9KTsNCgkJCX0sDQoJCQloYW5kbGVDaGFuZ2UodmFsdWUsIGluZGV4LCByb3cpIHsNCgkJCQl0aGlzLiRodHRwLmdldChgJHtyb3cudGFibGVOYW1lfS9kZXRhaWwvJHtyb3cucHJvZHVjdElkfWApLnRoZW4ocmVzID0+IHsNCgkJCQkJaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KCQkJCQkJaWYgKHJlcy5kYXRhLmRhdGEubGltaXRPbmUmJnJlcy5kYXRhLmRhdGEubGltaXRPbmUgPiAwKSB7DQoJCQkJCQkJaWYgKHZhbHVlID4gcmVzLmRhdGEuZGF0YS5saW1pdE9uZSkgew0KCQkJCQkJCQl0aGlzLnRhYmxlRGF0YVtpbmRleF0ucXVhbnRpdHkgPSAtLXZhbHVlOw0KCQkJCQkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKGDmr4/kurrljZXmrKHlj6rog73otK3kubAke3Jlcy5kYXRhLmRhdGEubGltaXRPbmV95Lu2YCk7DQoJCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQkJcm93LnF1YW50aXR5ID0gdmFsdWU7DQoJCQkJCQkJCXRoaXMuJGh0dHAucG9zdCgnY2FydC91cGRhdGUnLCByb3cpLnRoZW4ocmVzID0+IHt9KTsNCgkJCQkJCQl9DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCXJvdy5xdWFudGl0eSA9IHZhbHVlOw0KCQkJCQkJCXRoaXMuJGh0dHAucG9zdCgnY2FydC91cGRhdGUnLCByb3cpLnRoZW4ocmVzID0+IHt9KTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0pOw0KCQkJfSwNCgkJCWhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7DQoJCQkJdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6ZmkPycsICfmj5DnpLonLCB7DQoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCgkJCQkJY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQoJCQkJCXR5cGU6ICd3YXJuaW5nJw0KCQkJCX0pLnRoZW4oKCkgPT4gew0KCQkJCQlsZXQgZGVsSWRzID0gbmV3IEFycmF5KCk7DQoJCQkJCWRlbElkcy5wdXNoKHJvdy5pZCk7DQoJCQkJCXRoaXMuJGh0dHAucG9zdCgnY2FydC9kZWxldGUnLCBkZWxJZHMpLnRoZW4ocmVzID0+IHsNCgkJCQkJCWlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCgkJCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQkJCQltZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScsDQoJCQkJCQkJCWR1cmF0aW9uOiAxNTAwLA0KCQkJCQkJCQlvbkNsb3NlOiAoKSA9PiB7DQoJCQkJCQkJCQl0aGlzLmdldENhcnRMaXN0KCk7DQoJCQkJCQkJCX0NCgkJCQkJCQl9KTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfSk7DQoJCQl9LA0KCQkJZGVsQWxsQ2xpY2soKXsNCgkJCQl0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTpgInkuK3llYblk4HliKDpmaQ/JywgJ+aPkOekuicsIHsNCgkJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCgkJCQkJdHlwZTogJ3dhcm5pbmcnDQoJCQkJfSkudGhlbigoKSA9PiB7DQoJCQkJCWxldCBkZWxJZHMgPSBuZXcgQXJyYXkoKTsNCgkJCQkJZm9yKGxldCB4IGluIHRoaXMuc2VsUm93cyl7DQoJCQkJCQlkZWxJZHMucHVzaCh0aGlzLnNlbFJvd3NbeF0uaWQpDQoJCQkJCX0NCgkJCQkJdGhpcy4kaHR0cC5wb3N0KCdjYXJ0L2RlbGV0ZScsIGRlbElkcykudGhlbihyZXMgPT4gew0KCQkJCQkJaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KCQkJCQkJCXRoaXMuJG1lc3NhZ2Uoew0KCQkJCQkJCQl0eXBlOiAnc3VjY2VzcycsDQoJCQkJCQkJCW1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJywNCgkJCQkJCQkJZHVyYXRpb246IDE1MDAsDQoJCQkJCQkJCW9uQ2xvc2U6ICgpID0+IHsNCgkJCQkJCQkJCXRoaXMuZ2V0Q2FydExpc3QoKTsNCgkJCQkJCQkJfQ0KCQkJCQkJCX0pOw0KCQkJCQkJfQ0KCQkJCQl9KTsNCgkJCQl9KTsNCgkJCX0sDQoJCQlidXlDbGljaygpIHsNCgkJCQlpZih0aGlzLnNlbFJvd3MubGVuZ3RoPT0wKSB7DQoJCQkJCXRoaXMuJG1lc3NhZ2Uoew0KCQkJCQkJdHlwZTogJ3dhcm5pbmcnLA0KCQkJCQkJbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgScsDQoJCQkJCQlkdXJhdGlvbjogMTUwMCwNCgkJCQkJfSk7DQoJCQkJCXJldHVybg0KCQkJCX0NCgkJCQl2YXIgZ24gPSAiIjsNCgkJCQlmb3IobGV0IHggaW4gdGhpcy5zZWxSb3dzKXsNCgkJCQkJdmFyIGcgPSB0aGlzLnNlbFJvd3NbeF07DQoJCQkJCWNvbnNvbGUubG9nKGcucHJvZHVjdFRpdGxlKQ0KCQkJCQlsZXQgdGhhdCA9IHRoaXM7DQoJCQkJCXRoaXMuJGh0dHAuZ2V0KGAke2cudGFibGVOYW1lfS9kZXRhaWwvJHtnLnByb2R1Y3RJZH1gKS50aGVuKHJlcyA9PiB7DQoJCQkJCQlpZiAocmVzLmRhdGEuY29kZSA9PSAwICYmIGcucXVhbnRpdHkgPiByZXMuZGF0YS5kYXRhLmdvb2RzU3RvY2tzKSB7DQoJCQkJCQkJZ24gPSBnLnByb2R1Y3RUaXRsZTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfQ0KCQkJDQoJCQkJc2V0VGltZW91dCgoKSA9PiB7DQoJCQkJCWlmKGduPT0iIikgew0KCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29yZGVyR29vZHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnNlbFJvd3MpKTsNCgkJCQkJCXRoaXMuJHJvdXRlci5wdXNoKCcvaW5kZXgvc2hvcC1vcmRlci9vcmRlckNvbmZpcm0nKTsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoZ24rYCDlupPlrZjkuI3otrNgKTsNCgkJCQkJCXJldHVybjsNCgkJCQkJfQ0KCQkJCX0sIDIwMCkNCgkJCX0NCgkJfSwNCgkJY29tcHV0ZWQ6IHsNCgkJCXRvdGFsUHJpY2UoKSB7DQoJCQkJbGV0IHRvdGFsUHJpY2UgPSAwOw0KCQkJCWZvcihsZXQgeCBpbiB0aGlzLnNlbFJvd3Mpew0KCQkJCQkgIHRvdGFsUHJpY2UgKz0gTnVtYmVyKHRoaXMuc2VsUm93c1t4XS5wcmljZSkgKiBOdW1iZXIodGhpcy5zZWxSb3dzW3hdLnF1YW50aXR5KQ0KCQkJCX0NCgkJCQlyZXR1cm4gdG90YWxQcmljZS50b0ZpeGVkKDIpOw0KCQkJfQ0KCQl9DQoJfQ0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/shop-cart","sourcesContent":["<template>\r\n\t<div :style='{\"width\":\"100%\",\"padding\":\"0 10%\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t<div class=\"section-title\" :style='{\"margin\":\"10px auto 0\",\"color\":\"#FFC174\",\"borderRadius\":\"60px\",\"textAlign\":\"center\",\"background\":\"#8E4033\",\"width\":\"80%\",\"fontSize\":\"24px\",\"lineHeight\":\"54px\",\"fontWeight\":\"bold\"}'>购物车</div>\r\n\t\t<el-button size=\"small\" type=\"danger\" @click=\"delAllClick\" :disabled=\"selRows.length?false:true\">删除</el-button>\r\n\t\t<el-table @selection-change=\"handleSelectionChange\" :data=\"tableData\" style=\"width: 100%\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"50\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"商品名称\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<div class=\"shangpin\">\r\n\t\t\t\t\t\t<el-image style=\"width: 100px; height: 100px;flex: 1\"\r\n\t\t\t\t\t\t\t:src=\"baseUrl + scope.row.picture\" fit=\"fill\"></el-image>\r\n\t\t\t\t\t\t<span style=\"margin-left: 10px;flex: 1\">{{ scope.row.productTitle }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"价格\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{ scope.row.price }}\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"数量\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-input-number :min=\"1\" v-model=\"scope.row.quantity\" @change=\"(value) => handleChange(value, scope.$index, scope.row)\" size=\"small\"></el-input-number>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"总价\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{ (scope.row.price * scope.row.quantity).toFixed(2) }}\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" width=\"150\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"danger\"\r\n\t\t\t\t\t\t@click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<div class=\"buy\" v-if=\"tableData.length > 0\">\r\n\t\t\t<span style=\"color: red;margin-right: 10px;font-weight: 700;\">总价：<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{totalPrice}}</span>\r\n\t\t\t<el-button type=\"warning\" @click=\"buyClick\">点击购买</el-button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport config from '@/config/config'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbaseUrl: config.baseUrl,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tselRows:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getCartList();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleSelectionChange(e){\r\n\t\t\t\tthis.selRows = e\r\n\t\t\t},\r\n\t\t\tgetCartList() {\r\n\t\t\t\tthis.$http.get('cart/list', {params: {page: 1, limit: 1000, userId: localStorage.getItem('frontUserId')}}).then(res => {\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\tthis.tableData = res.data.data.list;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleChange(value, index, row) {\r\n\t\t\t\tthis.$http.get(`${row.tableName}/detail/${row.productId}`).then(res => {\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\tif (res.data.data.limitOne&&res.data.data.limitOne > 0) {\r\n\t\t\t\t\t\t\tif (value > res.data.data.limitOne) {\r\n\t\t\t\t\t\t\t\tthis.tableData[index].quantity = --value;\r\n\t\t\t\t\t\t\t\tthis.$message.error(`每人单次只能购买${res.data.data.limitOne}件`);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trow.quantity = value;\r\n\t\t\t\t\t\t\t\tthis.$http.post('cart/update', row).then(res => {});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trow.quantity = value;\r\n\t\t\t\t\t\t\tthis.$http.post('cart/update', row).then(res => {});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleDelete(index, row) {\r\n\t\t\t\tthis.$confirm('是否确认删除?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlet delIds = new Array();\r\n\t\t\t\t\tdelIds.push(row.id);\r\n\t\t\t\t\tthis.$http.post('cart/delete', delIds).then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tmessage: '删除成功!',\r\n\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.getCartList();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdelAllClick(){\r\n\t\t\t\tthis.$confirm('是否确认选中商品删除?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlet delIds = new Array();\r\n\t\t\t\t\tfor(let x in this.selRows){\r\n\t\t\t\t\t\tdelIds.push(this.selRows[x].id)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$http.post('cart/delete', delIds).then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tmessage: '删除成功!',\r\n\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.getCartList();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbuyClick() {\r\n\t\t\t\tif(this.selRows.length==0) {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\tmessage: '请选择商品',\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar gn = \"\";\r\n\t\t\t\tfor(let x in this.selRows){\r\n\t\t\t\t\tvar g = this.selRows[x];\r\n\t\t\t\t\tconsole.log(g.productTitle)\r\n\t\t\t\t\tlet that = this;\r\n\t\t\t\t\tthis.$http.get(`${g.tableName}/detail/${g.productId}`).then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 0 && g.quantity > res.data.data.goodsStocks) {\r\n\t\t\t\t\t\t\tgn = g.productTitle;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif(gn==\"\") {\r\n\t\t\t\t\t\tlocalStorage.setItem('orderGoods', JSON.stringify(this.selRows));\r\n\t\t\t\t\t\tthis.$router.push('/index/shop-order/orderConfirm');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(gn+` 库存不足`);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttotalPrice() {\r\n\t\t\t\tlet totalPrice = 0;\r\n\t\t\t\tfor(let x in this.selRows){\r\n\t\t\t\t\t  totalPrice += Number(this.selRows[x].price) * Number(this.selRows[x].quantity)\r\n\t\t\t\t}\r\n\t\t\t\treturn totalPrice.toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n\t.section {\r\n\t\twidth: 900px;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\t\r\n\t.shangpin {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t.buy {\r\n\t\ttext-align: right;\r\n\t\tpadding-right: 82px;\r\n\t}\r\n</style>\r\n"]}]}